<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MEG Cafe, Gym & Carwash</title>
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>
  <!-- Lightbox CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css"/>
  <style>
    :root {
      --color-primary: #2D4A7F;
      --color-accent: #F6B221;
      --color-dark: #1A1A1A;
      --color-light: #ffffff;
    }
    body { font-family: Arial, sans-serif; margin:0; padding:0; }
    header, footer { width:100%; }
    /* Hero */
    #hero { width:100%; position:relative; }
    .swiper-hero { width:100%; height:500px; }
    .hero-slide { display:grid; grid-template-columns:70% 30%; align-items:center; height:100%; }
    .hero-text { padding:2rem; color:var(--color-light); }
    .hero-bg { width:100%; height:100%; object-fit:cover; }
    .swiper-button-next, .swiper-button-prev { color:#fff; }
    /* Produk */
    #products { padding:3rem 1rem; }
    .product-card { border:1px solid #eee; border-radius:12px; overflow:hidden; padding:1rem; text-align:center; background:#fff; }
    .product-card img { width:100%; max-height:180px; object-fit:cover; border-radius:8px; cursor:pointer; }
    /* Packages */
    #packages { padding:3rem 1rem; }
    .package-card { background:#fff; border-radius:12px; padding:1rem; margin:1rem 0; border:1px solid #eee; }
    /* Gallery */
    #gallery { padding:3rem 1rem; }
    .swiper-gallery { height:300px; }
    .swiper-gallery img { width:100%; height:100%; object-fit:cover; border-radius:8px; }
    /* Video Section */
    #video-section { display:grid; grid-template-columns:70% 30%; gap:1rem; padding:3rem 1rem; align-items:start; }
    #video-section iframe { width:100%; height:350px; border-radius:12px; }
    .advantages ul { list-style:none; padding:0; }
    .advantages li { margin:0.5rem 0; }
    /* Footer */
    footer { background:var(--color-dark); color:#fff; padding:2rem; text-align:center; }
    /* WhatsApp Floating */
    .whatsapp-float { position:fixed; bottom:20px; right:20px; width:60px; height:60px; z-index:1000; }
    .whatsapp-float img { width:100%; height:auto; }
    /* Responsive */
    @media(max-width:768px){
      .hero-slide { grid-template-columns:1fr; }
      #video-section { grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  <!-- Hero -->
  <section id="hero">
    <div class="swiper swiper-hero">
      <div class="swiper-wrapper" id="hero-slides"></div>
      <div class="swiper-pagination"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </section>

  <!-- Products -->
  <section id="products">
    <h2>Menu & Produk</h2>
    <div id="products-list" class="grid md:grid-cols-3 gap-4"></div>
  </section>

  <!-- Packages -->
  <section id="packages">
    <h2>Paket Gym & Carwash</h2>
    <div id="packages-list"></div>
  </section>

  <!-- Gallery -->
  <section id="gallery">
    <h2>Galeri</h2>
    <div class="swiper swiper-gallery">
      <div class="swiper-wrapper" id="gallery-slides"></div>
      <div class="swiper-pagination"></div>
    </div>
  </section>

  <!-- Video & Advantages -->
  <section id="video-section">
    <div id="youtube-container"></div>
    <div class="advantages">
      <h3>Kelebihan Kami</h3>
      <ul id="advantages-list">
        <li>✅ Gym modern & lengkap</li>
        <li>✅ Carwash cepat & wangi</li>
        <li>✅ Cafe nyaman & cozy</li>
      </ul>
    </div>
  </section>

  <!-- Maps -->
  <section id="maps">
    <h2>Lokasi Kami</h2>
    <div id="maps-container"></div>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 MEG Cafe, Gym & Carwash</p>
  </footer>

  <!-- WhatsApp Button -->
  <a href="#" id="wa-button" class="whatsapp-float" target="_blank">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
  </a>

  <!-- JS Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyA-J8A83fhg2hHCmoGZ6bvVSw5RHfbzy2Rs--rg-QEMpHvjbbuBj23HoKWz3Cf7Y5B/exec"; // ganti dengan endpoint JSON

    async function fetchData() {
      const res = await fetch(API_URL);
      return await res.json();
    }

    function renderHero(slides){
      const container = document.getElementById("hero-slides");
      container.innerHTML = "";
      slides.filter(s => s.active === "YES").forEach(s => {
        container.innerHTML += `
          <div class="swiper-slide hero-slide" style="background:${s.bg_color || "var(--color-primary)"} url('${s.image_url || ""}') center/cover no-repeat;">
            <div class="hero-text">
              <h2>${s.title}</h2>
              <p>${s.subtitle || ""}</p>
              ${s.button_link ? `<a href="${s.button_link}" class="btn">${s.button_text}</a>` : ""}
            </div>
            <div>
              ${s.image_url ? `<img src="${s.image_url}" alt="${s.alt_text}" class="hero-bg">` : ""}
            </div>
          </div>`;
      });
      new Swiper(".swiper-hero", {
        loop:true,
        autoplay:{delay:4000},
        navigation:{nextEl:".swiper-button-next", prevEl:".swiper-button-prev"},
        pagination:{el:".swiper-pagination", clickable:true}
      });
    }

    function renderProducts(products){
      const list = document.getElementById("products-list");
      list.innerHTML = "";
      products.filter(p => p.active === "YES" && p.status === "READY").forEach(p => {
        list.innerHTML += `
          <div class="product-card">
            <a href="${p.image_url}" class="glightbox">
              <img src="${p.image_url}" alt="${p.name}">
            </a>
            <h3>${p.name}</h3>
            <p>${p.description || ""}</p>
            <p><strong>${p.currency} ${p.price_original}</strong></p>
          </div>`;
      });
      GLightbox({ selector: ".glightbox" });
    }

    function renderPackages(packages){
      const list = document.getElementById("packages-list");
      list.innerHTML = "";
      packages.filter(p => p.active === "YES").forEach(p => {
        list.innerHTML += `
          <div class="package-card">
            <h3>${p.name}</h3>
            <p>${p.description}</p>
            <p><strong>${p.price} / ${p.duration}</strong></p>
          </div>`;
      });
    }

    function renderGallery(gallery){
      const container = document.getElementById("gallery-slides");
      container.innerHTML = "";
      gallery.filter(g => g.active === "YES").forEach(g => {
        container.innerHTML += `
          <div class="swiper-slide"><img src="${g.image_url}" alt="${g.caption}"></div>`;
      });
      new Swiper(".swiper-gallery", {
        loop:true,
        autoplay:{delay:3000},
        pagination:{el:".swiper-pagination", clickable:true}
      });
    }

    function renderSettings(settings){
      const s = {};
      settings.forEach(item => s[item.key] = item.value);
      // Maps
      document.getElementById("maps-container").innerHTML = `
        <iframe src="${s.google_maps_embed}" width="100%" height="350" style="border:0;" allowfullscreen loading="lazy"></iframe>
      `;
      // YouTube
      document.getElementById("youtube-container").innerHTML = `
        <iframe src="https://www.youtube.com/embed/videoseries?list=${s.youtube_playlist_id}" frameborder="0" allowfullscreen></iframe>
      `;
      // WhatsApp
      document.getElementById("wa-button").href = `https://wa.me/${s.phone_whatsapp}`;
    }

    // Init
    fetchData().then(data => {
      renderHero(data.slider || []);
      renderProducts(data.products || []);
      renderPackages(data.packages || []);
      renderGallery(data.gallery || []);
      renderSettings(data.settings || []);
    });
  </script>
</body>
</html>
